<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="1、设置UILabel行间距
123456NSMutableAttributedString* attrString = [[NSMutableAttributedString  alloc] initWithString:label.text];NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];[sty">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS TIPS">
<meta property="og:url" content="http://yoursite.com/2017/03/10/iOS-TIPS/index.html">
<meta property="og:site_name" content="An Guoli's Blog">
<meta property="og:description" content="1、设置UILabel行间距
123456NSMutableAttributedString* attrString = [[NSMutableAttributedString  alloc] initWithString:label.text];NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];[sty">
<meta property="og:image" content="http://ofutv2nt8.bkt.clouddn.com/1499657090104458.gif">
<meta property="og:image" content="http://ofutv2nt8.bkt.clouddn.com/xib%E8%AE%BE%E7%BD%AE%E5%9C%86%E8%A7%92%E8%BE%B9%E6%A1%86.png">
<meta property="og:image" content="http://ofutv2nt8.bkt.clouddn.com/xib%E8%AE%BE%E7%BD%AE%E8%BE%B9%E6%A1%86%E9%A2%9C%E8%89%B2.png">
<meta property="og:updated_time" content="2017-12-27T01:49:12.790Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS TIPS">
<meta name="twitter:description" content="1、设置UILabel行间距
123456NSMutableAttributedString* attrString = [[NSMutableAttributedString  alloc] initWithString:label.text];NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];[sty">
<meta name="twitter:image" content="http://ofutv2nt8.bkt.clouddn.com/1499657090104458.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/03/10/iOS-TIPS/"/>





  <title> iOS TIPS | An Guoli's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>
<a href="https://github.com/anguoli"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">An Guoli's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/10/iOS-TIPS/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="安国立">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ofutv2nt8.bkt.clouddn.com/blog/image/xiamu.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="An Guoli's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="An Guoli's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                iOS TIPS
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-10T23:49:27+08:00">
                2017-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>1、设置UILabel行间距</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSMutableAttributedString* attrString = [[NSMutableAttributedString  alloc] initWithString:label.text];</div><div class="line">NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];</div><div class="line">[style setLineSpacing:20];</div><div class="line">[attrString addAttribute:NSParagraphStyleAttributeName value:style range:NSMakeRange(0, label.text.length)];</div><div class="line">label.attributedText = attrString;</div><div class="line">// 或者使用xib，看下gif图</div></pre></td></tr></table></figure>
<p><img src="http://ofutv2nt8.bkt.clouddn.com/1499657090104458.gif" alt=""></p>
<p>2、当使用-performSelector:withObject:withObject:afterDelay:方法时，需要传入多参数问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 方法一、</div><div class="line">// 把参数放进一个数组／字典，直接把数组／字典当成一个参数传过去，具体方法实现的地方再解析这个数组／字典</div><div class="line">NSArray * array =</div><div class="line">[NSArray arrayWithObjects: @&quot;first&quot;, @&quot;second&quot;, nil];</div><div class="line">[self performSelector:@selector(fooFirstInput:) withObject: array afterDelay:15.0];</div><div class="line"></div><div class="line">// 方法二、</div><div class="line">// 使用NSInvocation</div><div class="line">SEL aSelector = NSSelectorFromString(@&quot;doSoming:argument2:&quot;);</div><div class="line">NSInteger argument1 = 10;</div><div class="line">NSString *argument2 = @&quot;argument2&quot;;</div><div class="line">if([self respondsToSelector:aSelector]) &#123;</div><div class="line">NSInvocation *inv = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:aSelector]];</div><div class="line">[inv setSelector:aSelector];</div><div class="line">[inv setTarget:self];</div><div class="line">[inv setArgument:&amp;(argument1) atIndex:2];</div><div class="line">[inv setArgument:&amp;(argument2) atIndex:3];</div><div class="line">[inv performSelector:@selector(invoke) withObject:nil afterDelay:15.0];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3、UILabel显示不同颜色字体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:label.text];</div><div class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0,5)];</div><div class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(5,6)];</div><div class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(11,5)];</div><div class="line">label.attributedText = string;</div></pre></td></tr></table></figure>
<p>4、比较两个CGRect/CGSize/CGPoint是否相等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">if (CGRectEqualToRect(rect1, rect2)) &#123; // 两个区域相等</div><div class="line">// do some</div><div class="line">&#125;</div><div class="line">if (CGPointEqualToPoint(point1, point2)) &#123; // 两个点相等</div><div class="line">// do some</div><div class="line">&#125;</div><div class="line">if (CGSizeEqualToSize(size1, size2)) &#123; // 两个size相等</div><div class="line">// do some</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5、比较两个NSDate相差多少小时</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSDate* date1 = someDate;</div><div class="line">NSDate* date2 = someOtherDate;</div><div class="line">NSTimeInterval distanceBetweenDates = [date1 timeIntervalSinceDate:date2];</div><div class="line">double secondsInAnHour = 3600;</div><div class="line">// 除以3600是把秒化成小时，除以60得到结果为相差的分钟数</div><div class="line">NSInteger hoursBetweenDates = distanceBetweenDates / secondsInAnHour;</div></pre></td></tr></table></figure>
<p>6、每个cell之间增加间距</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// 方法一，每个分区只显示一行cell，分区头当作你想要的间距(注意，从数据源数组中取值的时候需要用indexPath.section而不是indexPath.row)</div><div class="line">- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView</div><div class="line">&#123;</div><div class="line">return yourArry.count;</div><div class="line">&#125;</div><div class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section</div><div class="line">&#123;</div><div class="line">return 1;</div><div class="line">&#125;</div><div class="line">-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section</div><div class="line">&#123;</div><div class="line">return cellSpacingHeight;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 方法二，在cell的contentView上加个稍微低一点的view，cell上原本的内容放在你的view上，而不是contentView上，这样能伪造出一个间距来。</div><div class="line"></div><div class="line">// 方法三，自定义cell，重写setFrame：方法</div><div class="line">- (void)setFrame:(CGRect)frame</div><div class="line">&#123;</div><div class="line">frame.size.height -= 20;</div><div class="line">[super setFrame:frame];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>7、播放一张张连续的图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 加入现在有三张图片分别为animate_1、animate_2、animate_3</div><div class="line">// 方法一</div><div class="line">imageView.animationImages = @[[UIImage imageNamed:@&quot;animate_1&quot;], [UIImage imageNamed:@&quot;animate_2&quot;], [UIImage imageNamed:@&quot;animate_3&quot;]];</div><div class="line">imageView.animationDuration = 1.0;</div><div class="line">// 方法二</div><div class="line">imageView.image = [UIImage animatedImageNamed:@&quot;animate_&quot; duration:1.0];</div><div class="line">// 方法二解释下，这个方法会加载animate_为前缀的，后边0-1024，也就是animate_0、animate_1一直到animate_1024</div></pre></td></tr></table></figure>
<p>8、加载gif图片</p>
<p>推荐使用这个框架 FLAnimatedImage</p>
<p>9、防止离屏渲染为image添加圆角</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// image分类</div><div class="line">- (UIImage *)circleImage</div><div class="line">&#123;</div><div class="line">// NO代表透明</div><div class="line">UIGraphicsBeginImageContextWithOptions(self.size, NO, 1);</div><div class="line">// 获得上下文</div><div class="line">CGContextRef ctx = UIGraphicsGetCurrentContext();</div><div class="line">// 添加一个圆</div><div class="line">CGRect rect = CGRectMake(0, 0, self.size.width, self.size.height);</div><div class="line">// 方形变圆形</div><div class="line">CGContextAddEllipseInRect(ctx, rect);</div><div class="line">// 裁剪</div><div class="line">CGContextClip(ctx);</div><div class="line">// 将图片画上去</div><div class="line">[self drawInRect:rect];</div><div class="line">UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">UIGraphicsEndImageContext();</div><div class="line">return image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>10、查看系统所有字体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 打印字体</div><div class="line">for (id familyName in [UIFont familyNames]) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, familyName);</div><div class="line">for (id fontName in [UIFont fontNamesForFamilyName:familyName]) NSLog(@&quot;  %@&quot;, fontName);</div><div class="line">&#125;</div><div class="line">// 也可以进入这个网址查看 http://iosfonts.com/</div></pre></td></tr></table></figure>
<p>11、获取随机数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSInteger i = arc4random();</div></pre></td></tr></table></figure>
<p>12、获取随机数小数(0-1之间)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#define ARC4RANDOM_MAX      0x100000000</div><div class="line">double val = ((double)arc4random() / ARC4RANDOM_MAX);</div></pre></td></tr></table></figure>
<p>13、AVPlayer视频播放完成的通知监听</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[NSNotificationCenter defaultCenter]</div><div class="line">addObserver:self</div><div class="line">selector:@selector(videoPlayEnd)</div><div class="line">name:AVPlayerItemDidPlayToEndTimeNotification</div><div class="line">object:nil];</div></pre></td></tr></table></figure>
<p>14、判断两个rect是否有交叉</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">if (CGRectIntersectsRect(rect1, rect2)) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>15、判断一个字符串是否为数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">NSCharacterSet *notDigits = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];</div><div class="line">if ([str rangeOfCharacterFromSet:notDigits].location == NSNotFound)</div><div class="line">&#123;</div><div class="line">// 是数字</div><div class="line">&#125; else</div><div class="line">&#123;</div><div class="line">// 不是数字</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>16、将一个view保存为pdf格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename</div><div class="line">&#123;</div><div class="line">NSMutableData *pdfData = [NSMutableData data];</div><div class="line">UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);</div><div class="line">UIGraphicsBeginPDFPage();</div><div class="line">CGContextRef pdfContext = UIGraphicsGetCurrentContext();</div><div class="line">[aView.layer renderInContext:pdfContext];</div><div class="line">UIGraphicsEndPDFContext();</div><div class="line"></div><div class="line">NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);</div><div class="line">NSString* documentDirectory = [documentDirectories objectAtIndex:0];</div><div class="line">NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];</div><div class="line">[pdfData writeToFile:documentDirectoryFilename atomically:YES];</div><div class="line">NSLog(@&quot;documentDirectoryFileName: %@&quot;,documentDirectoryFilename);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>17、让一个view在父视图中心</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">child.center = [parent convertPoint:parent.center fromView:parent.superview];</div></pre></td></tr></table></figure>
<p>18、获取当前导航控制器下前一个控制器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (UIViewController *)backViewController</div><div class="line">&#123;</div><div class="line">NSInteger myIndex = [self.navigationController.viewControllers indexOfObject:self];</div><div class="line"></div><div class="line">if ( myIndex != 0 &amp;&amp; myIndex != NSNotFound ) &#123;</div><div class="line">return [self.navigationController.viewControllers objectAtIndex:myIndex-1];</div><div class="line">&#125; else &#123;</div><div class="line">return nil;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>19、保存UIImage到本地</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);</div><div class="line">NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@&quot;Image.png&quot;];</div><div class="line"></div><div class="line">[UIImagePNGRepresentation(image) writeToFile:filePath atomically:YES];</div></pre></td></tr></table></figure>
<p>20、键盘上方增加工具栏</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">UIToolbar *keyboardDoneButtonView = [[UIToolbar alloc] init];</div><div class="line">[keyboardDoneButtonView sizeToFit];</div><div class="line">UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@&quot;Done&quot;</div><div class="line">style:UIBarButtonItemStyleBordered target:self</div><div class="line">action:@selector(doneClicked:)];</div><div class="line">[keyboardDoneButtonView setItems:[NSArray arrayWithObjects:doneButton, nil]];</div><div class="line">txtField.inputAccessoryView = keyboardDoneButtonView;</div></pre></td></tr></table></figure>
<p>21、copy一个view</p>
<p>因为UIView没有实现copy协议，因此找不到copyWithZone方法，使用copy的时候导致崩溃<br>但是我们可以通过归档再解档实现copy，这相当于对视图进行了一次深拷贝，代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id copyOfView =</div><div class="line">[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:originalView]];</div></pre></td></tr></table></figure>
<p>22、在image上绘制文字并生成新的image</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UIFont *font = [UIFont boldSystemFontOfSize:12];</div><div class="line">UIGraphicsBeginImageContext(image.size);</div><div class="line">[image drawInRect:CGRectMake(0,0,image.size.width,image.size.height)];</div><div class="line">CGRect rect = CGRectMake(point.x, point.y, image.size.width, image.size.height);</div><div class="line">[[UIColor whiteColor] set];</div><div class="line">[text drawInRect:CGRectIntegral(rect) withFont:font];</div><div class="line">UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">UIGraphicsEndImageContext();</div></pre></td></tr></table></figure>
<p>23、判断一个view是否为另一个view的子视图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 如果myView是self.view本身，也会返回yes</div><div class="line">BOOL isSubView = [myView isDescendantOfView:self.view];</div></pre></td></tr></table></figure>
<p>24、判断一个字符串是否包含另一个字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 方法一、这种方法只适用于iOS8之后，如果是配iOS8之前用方法二</div><div class="line">if ([str containsString:otherStr]) NSLog(@&quot;包含&quot;);</div><div class="line"></div><div class="line">// 方法二</div><div class="line">NSRange range = [str rangeOfString:otherStr];</div><div class="line">if (range.location != NSNotFound) NSLog(@&quot;包含&quot;);</div></pre></td></tr></table></figure>
<p>25、UICollectionView自动滚动到某行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 重写viewDidLayoutSubviews方法</div><div class="line">-(void)viewDidLayoutSubviews &#123;</div><div class="line">[super viewDidLayoutSubviews];</div><div class="line">[self.collectionView scrollToItemAtIndexPath:indexPath atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>26、修改系统UIAlertController</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 但是据说这种方法会被App Store拒绝(慎用！)</div><div class="line">UIAlertController *alertVC = [UIAlertController alertControllerWithTitle:@&quot;&quot; message:@&quot;&quot; preferredStyle:UIAlertControllerStyleActionSheet];</div><div class="line">NSMutableAttributedString *hogan = [[NSMutableAttributedString alloc] initWithString:@&quot;我是一个大文本&quot;];</div><div class="line">[hogan addAttribute:NSFontAttributeName</div><div class="line">value:[UIFont systemFontOfSize:30]</div><div class="line">range:NSMakeRange(4, 1)];</div><div class="line">[hogan addAttribute:NSForegroundColorAttributeName</div><div class="line">value:[UIColor redColor]</div><div class="line">range:NSMakeRange(4, 1)];</div><div class="line">[alertVC setValue:hogan forKey:@&quot;attributedTitle&quot;];</div><div class="line"></div><div class="line">UIAlertAction *button = [UIAlertAction actionWithTitle:@&quot;Label text&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction *action)&#123; &#125;];</div><div class="line">UIImage *accessoryImage = [UIImage imageNamed:@&quot;1&quot;];</div><div class="line">[button setValue:accessoryImage forKey:@&quot;image&quot;];</div><div class="line">[alertVC addAction:button];</div><div class="line">[self presentViewController:alertVC animated:YES completion:nil];</div></pre></td></tr></table></figure>
<p>27、判断某一行的cell是否已经显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CGRect cellRect = [tableView rectForRowAtIndexPath:indexPath];</div><div class="line">BOOL completelyVisible = CGRectContainsRect(tableView.bounds, cellRect);</div></pre></td></tr></table></figure>
<p>28、让导航控制器pop回指定的控制器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];</div><div class="line">for (UIViewController *aViewController in allViewControllers) &#123;</div><div class="line">if ([aViewController isKindOfClass:[RequiredViewController class]]) &#123;</div><div class="line">[self.navigationController popToViewController:aViewController animated:NO];</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>29、动画修改label上的文字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// 方法一</div><div class="line">CATransition *animation = [CATransition animation];</div><div class="line">animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</div><div class="line">animation.type = kCATransitionFade;</div><div class="line">animation.duration = 0.75;</div><div class="line">[self.label.layer addAnimation:animation forKey:@&quot;kCATransitionFade&quot;];</div><div class="line">self.label.text = @&quot;New&quot;;</div><div class="line"></div><div class="line">// 方法二</div><div class="line">[UIView transitionWithView:self.label</div><div class="line">duration:0.25f</div><div class="line">options:UIViewAnimationOptionTransitionCrossDissolve</div><div class="line">animations:^&#123;</div><div class="line">self.label.text = @&quot;Well done!&quot;;</div><div class="line">&#125; completion:nil];</div><div class="line"></div><div class="line">// 方法三</div><div class="line">[UIView animateWithDuration:1.0</div><div class="line">animations:^&#123;</div><div class="line">self.label.alpha = 0.0f;</div><div class="line">self.label.text = @&quot;newText&quot;;</div><div class="line">self.label.alpha = 1.0f;</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>30、判断字典中是否包含某个key值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if ([dic objectForKey:@&quot;yourKey&quot;]) &#123;</div><div class="line">NSLog(@&quot;有这个值&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">NSLog(@&quot;没有这个值&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>31、获取屏幕方向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;</div><div class="line"></div><div class="line">if(orientation == 0) //Default orientation</div><div class="line">//默认</div><div class="line">else if(orientation == UIInterfaceOrientationPortrait)</div><div class="line">//竖屏</div><div class="line">else if(orientation == UIInterfaceOrientationLandscapeLeft)</div><div class="line">// 左横屏</div><div class="line">else if(orientation == UIInterfaceOrientationLandscapeRight)</div><div class="line">//右横屏</div></pre></td></tr></table></figure>
<p>32、设置UIImage的透明度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// 方法一、添加UIImage分类</div><div class="line">- (UIImage *)imageByApplyingAlpha:(CGFloat) alpha &#123;</div><div class="line">UIGraphicsBeginImageContextWithOptions(self.size, NO, 0.0f);</div><div class="line"></div><div class="line">CGContextRef ctx = UIGraphicsGetCurrentContext();</div><div class="line">CGRect area = CGRectMake(0, 0, self.size.width, self.size.height);</div><div class="line"></div><div class="line">CGContextScaleCTM(ctx, 1, -1);</div><div class="line">CGContextTranslateCTM(ctx, 0, -area.size.height);</div><div class="line"></div><div class="line">CGContextSetBlendMode(ctx, kCGBlendModeMultiply);</div><div class="line"></div><div class="line">CGContextSetAlpha(ctx, alpha);</div><div class="line"></div><div class="line">CGContextDrawImage(ctx, area, self.CGImage);</div><div class="line"></div><div class="line">UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line"></div><div class="line">UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">return newImage;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 方法二、如果没有奇葩需求，干脆用UIImageView设置透明度</div><div class="line">UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithName:@&quot;yourImage&quot;]];</div><div class="line">imageView.alpha = 0.5;</div></pre></td></tr></table></figure>
<p>33、Attempt to mutate immutable object with insertString:atIndex:</p>
<p>这个错是因为你拿字符串调用insertString:atIndex:方法的时候，调用对象不是NSMutableString，应该先转成这个类型再调用</p>
<p>34、UIWebView添加单击手势不响应</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(webViewClick)];</div><div class="line">tap.delegate = self;</div><div class="line">[_webView addGestureRecognizer:tap];</div><div class="line"></div><div class="line">// 因为webView本身有一个单击手势，所以再添加会造成手势冲突，从而不响应。需要绑定手势代理，并实现下边的代理方法</div><div class="line">- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer&#123;</div><div class="line">return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>35、获取手机RAM容量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// 需要导入#import</div><div class="line">mach_port_t host_port;</div><div class="line">mach_msg_type_number_t host_size;</div><div class="line">vm_size_t pagesize;</div><div class="line"></div><div class="line">host_port = mach_host_self();</div><div class="line">host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);</div><div class="line">host_page_size(host_port, &amp;pagesize);</div><div class="line"></div><div class="line">vm_statistics_data_t vm_stat;</div><div class="line"></div><div class="line">if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size) != KERN_SUCCESS) &#123;</div><div class="line">NSLog(@&quot;Failed to fetch vm statistics&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">/* Stats in bytes */</div><div class="line">natural_t mem_used = (vm_stat.active_count +</div><div class="line">vm_stat.inactive_count +</div><div class="line">vm_stat.wire_count) * pagesize;</div><div class="line">natural_t mem_free = vm_stat.free_count * pagesize;</div><div class="line">natural_t mem_total = mem_used + mem_free;</div><div class="line">NSLog(@&quot;已用: %u 可用: %u 总共: %u&quot;, mem_used, mem_free, mem_total);</div></pre></td></tr></table></figure>
<p>36、地图上两个点之间的实际距离</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 需要导入#import</div><div class="line">CLLocation *locA = [[CLLocation alloc] initWithLatitude:34 longitude:113];</div><div class="line">CLLocation *locB = [[CLLocation alloc] initWithLatitude:31.05 longitude:121.76];</div><div class="line">// CLLocationDistance求出的单位为米</div><div class="line">CLLocationDistance distance = [locA distanceFromLocation:locB];</div></pre></td></tr></table></figure>
<p>37、在应用中打开设置的某个界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">// 打开设置-&gt;通用</div><div class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;prefs:root=General&quot;]];</div><div class="line"></div><div class="line">// 以下是设置其他界面</div><div class="line">prefs:root=General&amp;path=About</div><div class="line">prefs:root=General&amp;path=ACCESSIBILITY</div><div class="line">prefs:root=AIRPLANE_MODE</div><div class="line">prefs:root=General&amp;path=AUTOLOCK</div><div class="line">prefs:root=General&amp;path=USAGE/CELLULAR_USAGE</div><div class="line">prefs:root=Brightness</div><div class="line">prefs:root=Bluetooth</div><div class="line">prefs:root=General&amp;path=DATE_AND_TIME</div><div class="line">prefs:root=FACETIME</div><div class="line">prefs:root=General</div><div class="line">prefs:root=General&amp;path=Keyboard</div><div class="line">prefs:root=CASTLE</div><div class="line">prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP</div><div class="line">prefs:root=General&amp;path=INTERNATIONAL</div><div class="line">prefs:root=LOCATION_SERVICES</div><div class="line">prefs:root=ACCOUNT_SETTINGS</div><div class="line">prefs:root=MUSIC</div><div class="line">prefs:root=MUSIC&amp;path=EQ</div><div class="line">prefs:root=MUSIC&amp;path=VolumeLimit</div><div class="line">prefs:root=General&amp;path=Network</div><div class="line">prefs:root=NIKE_PLUS_IPOD</div><div class="line">prefs:root=NOTES</div><div class="line">prefs:root=NOTIFICATIONS_ID</div><div class="line">prefs:root=Phone</div><div class="line">prefs:root=Photos</div><div class="line">prefs:root=General&amp;path=ManagedConfigurationList</div><div class="line">prefs:root=General&amp;path=Reset</div><div class="line">prefs:root=Sounds&amp;path=Ringtone</div><div class="line">prefs:root=Safari</div><div class="line">prefs:root=General&amp;path=Assistant</div><div class="line">prefs:root=Sounds</div><div class="line">prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</div><div class="line">prefs:root=STORE</div><div class="line">prefs:root=TWITTER</div><div class="line">prefs:root=FACEBOOK</div><div class="line">prefs:root=General&amp;path=USAGE prefs:root=VIDEO</div><div class="line">prefs:root=General&amp;path=Network/VPN</div><div class="line">prefs:root=Wallpaper</div><div class="line">prefs:root=WIFI</div><div class="line">prefs:root=INTERNET_TETHERING</div><div class="line">prefs:root=Phone&amp;path=Blocked</div><div class="line">prefs:root=DO_NOT_DISTURB</div></pre></td></tr></table></figure>
<p>38、在UITextView中显示html文本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 30, 100, 199)];</div><div class="line">textView.backgroundColor = [UIColor redColor];</div><div class="line">[self.view addSubview:textView];</div><div class="line">NSString *htmlString = @&quot;</div><div class="line">![](http://blogs.babble.com/famecrawler/files/2010/11/mickey_mouse-1097.jpg)&quot;;</div><div class="line">NSAttributedString *attributedString = [[NSAttributedString alloc] initWithData: [htmlString dataUsingEncoding:NSUnicodeStringEncoding] options: @&#123; NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType &#125; documentAttributes: nil error: nil];</div><div class="line">textView.attributedText = attributedString;</div></pre></td></tr></table></figure>
<p>39、监听scrollView是否滚动到了顶部／底部</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">-(void)scrollViewDidScroll: (UIScrollView*)scrollView</div><div class="line">&#123;</div><div class="line">float scrollViewHeight = scrollView.frame.size.height;</div><div class="line">float scrollContentSizeHeight = scrollView.contentSize.height;</div><div class="line">float scrollOffset = scrollView.contentOffset.y;</div><div class="line"></div><div class="line">if (scrollOffset == 0)</div><div class="line">&#123;</div><div class="line">// 滚动到了顶部</div><div class="line">&#125;</div><div class="line">else if (scrollOffset + scrollViewHeight == scrollContentSizeHeight)</div><div class="line">&#123;</div><div class="line">// 滚动到了底部</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>40、UISlider增量／减量为固定值(假如为5)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (void)setupSlider</div><div class="line">&#123;</div><div class="line">UISlider *slider = [[UISlider alloc] init];</div><div class="line">[self.view addSubview:slider];</div><div class="line">[slider addTarget:self action:@selector(sliderAction:) forControlEvents:UIControlEventValueChanged];</div><div class="line">slider.maximumValue = 100;</div><div class="line">slider.minimumValue = 0;</div><div class="line">slider.frame = CGRectMake(200, 20, 100, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sliderAction:(UISlider *)slider</div><div class="line">&#123;</div><div class="line">[slider setValue:((int)((slider.value + 2.5) / 5) * 5) animated:NO];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>41、选中textField或者textView所有文本(我这里以textView为例)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.textView setSelectedTextRange:[self.textView textRangeFromPosition:self.textView.beginningOfDocument toPosition:self.textView.endOfDocument]]</div></pre></td></tr></table></figure>
<p>42、从导航控制器中删除某个控制器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// 方法一、知道这个控制器所处的导航控制器下标</div><div class="line">NSMutableArray *navigationArray = [[NSMutableArray alloc] initWithArray: self.navigationController.viewControllers];</div><div class="line">[navigationArray removeObjectAtIndex: 2];</div><div class="line">self.navigationController.viewControllers = navigationArray;</div><div class="line"></div><div class="line">// 方法二、知道具体是哪个控制器</div><div class="line">NSArray* tempVCA = [self.navigationController viewControllers];</div><div class="line"></div><div class="line">for(UIViewController *tempVC in tempVCA)</div><div class="line">&#123;</div><div class="line">if([tempVC isKindOfClass:[urViewControllerClass class]])</div><div class="line">&#123;</div><div class="line">[tempVC removeFromParentViewController];</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>43、隐藏UITextView/UITextField光标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">textField.tintColor = [UIColor clearColor];</div><div class="line">44、当UITextView/UITextField中没有文字时，禁用回车键</div><div class="line">textField.enablesReturnKeyAutomatically = YES;</div></pre></td></tr></table></figure>
<p>45、字符串encode编码(编码url字符串不成功的问题)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 我们一般用这个方法处理stringByAddingPercentEscapesUsingEncoding但是这个方法好想不会处理／和&amp;这种特殊符号，这种情况就需要用下边这个方法处理</div><div class="line">@implementation NSString (NSString_Extended)</div><div class="line">- (NSString *)urlencode &#123;</div><div class="line">NSMutableString *output = [NSMutableString string];</div><div class="line">const unsigned char *source = (const unsigned char *)[self UTF8String];</div><div class="line">int sourceLen = strlen((const char *)source);</div><div class="line">for (int i = 0; i &lt; sourceLen; ++i) &#123;</div><div class="line">const unsigned char thisChar = source[i];</div><div class="line">if (thisChar == &apos; &apos;)&#123;</div><div class="line">[output appendString:@&quot;+&quot;];</div><div class="line">&#125; else if (thisChar == &apos;.&apos; || thisChar == &apos;-&apos; || thisChar == &apos;_&apos; || thisChar == &apos;~&apos; ||</div><div class="line">(thisChar &gt;= &apos;a&apos; &amp;&amp; thisChar = &apos;A&apos; &amp;&amp; thisChar = &apos;0&apos; &amp;&amp; thisChar &lt;= &apos;9&apos;)) &#123;</div><div class="line">[output appendFormat:@&quot;%c&quot;, thisChar];</div><div class="line">&#125; else &#123;</div><div class="line">[output appendFormat:@&quot;%%X&quot;, thisChar];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">return output;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>46、计算UILabel上某段文字的frame</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@implementation UILabel (TextRect)</div><div class="line"></div><div class="line">- (CGRect)boundingRectForCharacterRange:(NSRange)range</div><div class="line">&#123;</div><div class="line">NSTextStorage *textStorage = [[NSTextStorage alloc] initWithAttributedString:[self attributedText]];</div><div class="line">NSLayoutManager *layoutManager = [[NSLayoutManager alloc] init];</div><div class="line">[textStorage addLayoutManager:layoutManager];</div><div class="line">NSTextContainer *textContainer = [[NSTextContainer alloc] initWithSize:[self bounds].size];</div><div class="line">textContainer.lineFragmentPadding = 0;</div><div class="line">[layoutManager addTextContainer:textContainer];</div><div class="line">NSRange glyphRange;</div><div class="line">[layoutManager characterRangeForGlyphRange:range actualGlyphRange:&amp;glyphRange];</div><div class="line">return [layoutManager boundingRectForGlyphRange:glyphRange inTextContainer:textContainer];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>47、获取随机UUID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">NSString *result;</div><div class="line">if([[[UIDevice currentDevice] systemVersion] floatValue] &gt; 6.0)</div><div class="line">&#123;</div><div class="line">result = [[NSUUID UUID] UUIDString];</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">CFUUIDRef uuidRef = CFUUIDCreate(NULL);</div><div class="line">CFStringRef uuid = CFUUIDCreateString(NULL, uuidRef);</div><div class="line">CFRelease(uuidRef);</div><div class="line">result = (__bridge_transfer NSString *)uuid;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>48、仿苹果抖动动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#define RADIANS(degrees) (((degrees) * M_PI) / 180.0)</div><div class="line"></div><div class="line">- (void)startAnimate &#123;</div><div class="line">view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-5));</div><div class="line">[UIView animateWithDuration:0.25 delay:0.0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse) animations:^ &#123;</div><div class="line">view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(5));</div><div class="line">&#125; completion:nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)stopAnimate &#123;</div><div class="line">[UIView animateWithDuration:0.25 delay:0.0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveLinear) animations:^ &#123;</div><div class="line">view.transform = CGAffineTransformIdentity;</div><div class="line">&#125; completion:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>49、修改UISearBar内部背景颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UITextField *textField = [_searchBar valueForKey:@&quot;_searchField&quot;];</div><div class="line">textField.backgroundColor = [UIColor redColor];</div></pre></td></tr></table></figure>
<p>50、UITextView滚动到顶部</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 方法一</div><div class="line">[self.textView scrollRangeToVisible:NSMakeRange(0, 0)];</div><div class="line">// 方法二</div><div class="line">[self.textView setContentOffset:CGPointZero animated:YES];</div></pre></td></tr></table></figure>
<p>51、通知监听APP生命周期</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">UIApplicationDidEnterBackgroundNotification 应用程序进入后台</div><div class="line">UIApplicationWillEnterForegroundNotification 应用程序将要进入前台</div><div class="line">UIApplicationDidFinishLaunchingNotification 应用程序完成启动</div><div class="line">UIApplicationDidFinishLaunchingNotification 应用程序由挂起变的活跃</div><div class="line">UIApplicationWillResignActiveNotification 应用程序挂起(有电话进来或者锁屏)</div><div class="line">UIApplicationDidReceiveMemoryWarningNotification 应用程序收到内存警告</div><div class="line">UIApplicationDidReceiveMemoryWarningNotification 应用程序终止(后台杀死、手机关机等)</div><div class="line">UIApplicationSignificantTimeChangeNotification 当有重大时间改变(凌晨0点，设备时间被修改，时区改变等)</div><div class="line">UIApplicationWillChangeStatusBarOrientationNotification 设备方向将要改变</div><div class="line">UIApplicationDidChangeStatusBarOrientationNotification 设备方向改变</div><div class="line">UIApplicationWillChangeStatusBarFrameNotification 设备状态栏frame将要改变</div><div class="line">UIApplicationDidChangeStatusBarFrameNotification 设备状态栏frame改变</div><div class="line">UIApplicationBackgroundRefreshStatusDidChangeNotification 应用程序在后台下载内容的状态发生变化</div><div class="line">UIApplicationProtectedDataWillBecomeUnavailable 本地受保护的文件被锁定,无法访问</div><div class="line">UIApplicationProtectedDataWillBecomeUnavailable 本地受保护的文件可用了</div></pre></td></tr></table></figure>
<p>52、触摸事件类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">UIControlEventTouchCancel 取消控件当前触发的事件</div><div class="line">UIControlEventTouchDown 点按下去的事件</div><div class="line">UIControlEventTouchDownRepeat 重复的触动事件</div><div class="line">UIControlEventTouchDragEnter 手指被拖动到控件的边界的事件</div><div class="line">UIControlEventTouchDragExit 一个手指从控件内拖到外界的事件</div><div class="line">UIControlEventTouchDragInside 手指在控件的边界内拖动的事件</div><div class="line">UIControlEventTouchDragOutside 手指在控件边界之外被拖动的事件</div><div class="line">UIControlEventTouchUpInside 手指处于控制范围内的触摸事件</div><div class="line">UIControlEventTouchUpOutside 手指超出控制范围的控制中的触摸事件</div></pre></td></tr></table></figure>
<p>53、UITextField文字周围增加边距</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">// 子类化UITextField，增加insert属性</div><div class="line">@interface WZBTextField : UITextField</div><div class="line">@property (nonatomic, assign) UIEdgeInsets insets;</div><div class="line">@end</div><div class="line"></div><div class="line">// 在.m文件重写下列方法</div><div class="line">- (CGRect)textRectForBounds:(CGRect)bounds &#123;</div><div class="line">CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</div><div class="line">if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeUnlessEditing) &#123;</div><div class="line">return [self adjustRectWithWidthRightView:paddedRect];</div><div class="line">&#125;</div><div class="line">return paddedRect;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (CGRect)placeholderRectForBounds:(CGRect)bounds &#123;</div><div class="line">CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</div><div class="line"></div><div class="line">if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeUnlessEditing) &#123;</div><div class="line">return [self adjustRectWithWidthRightView:paddedRect];</div><div class="line">&#125;</div><div class="line">return paddedRect;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (CGRect)editingRectForBounds:(CGRect)bounds &#123;</div><div class="line">CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</div><div class="line">if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeWhileEditing) &#123;</div><div class="line">return [self adjustRectWithWidthRightView:paddedRect];</div><div class="line">&#125;</div><div class="line">return paddedRect;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (CGRect)adjustRectWithWidthRightView:(CGRect)bounds &#123;</div><div class="line">CGRect paddedRect = bounds;</div><div class="line">paddedRect.size.width -= CGRectGetWidth(self.rightView.frame);</div><div class="line"></div><div class="line">return paddedRect;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>54、监听UISlider拖动状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 添加事件</div><div class="line">[slider addTarget:self action:@selector(sliderValurChanged:forEvent:) forControlEvents:UIControlEventValueChanged];</div><div class="line"></div><div class="line">// 实现方法</div><div class="line">- (void)sliderValurChanged:(UISlider*)slider forEvent:(UIEvent*)event &#123;</div><div class="line">UITouch *touchEvent = [[event allTouches] anyObject];</div><div class="line">switch (touchEvent.phase) &#123;</div><div class="line">case UITouchPhaseBegan:</div><div class="line">NSLog(@&quot;开始拖动&quot;);</div><div class="line">break;</div><div class="line">case UITouchPhaseMoved:</div><div class="line">NSLog(@&quot;正在拖动&quot;);</div><div class="line">break;</div><div class="line">case UITouchPhaseEnded:</div><div class="line">NSLog(@&quot;结束拖动&quot;);</div><div class="line">break;</div><div class="line">default:</div><div class="line">break;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>55、设置UITextField光标位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// textField需要设置的textField，index要设置的光标位置</div><div class="line">- (void)cursorLocation:(UITextField *)textField index:(NSInteger)index</div><div class="line">&#123;</div><div class="line">NSRange range = NSMakeRange(index, 0);</div><div class="line">UITextPosition *start = [textField positionFromPosition:[textField beginningOfDocument] offset:range.location];</div><div class="line">UITextPosition *end = [textField positionFromPosition:start offset:range.length];</div><div class="line">[textField setSelectedTextRange:[textField textRangeFromPosition:start toPosition:end]];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>56、去除webView底部黑色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[webView setBackgroundColor:[UIColor clearColor]];</div><div class="line">[webView setOpaque:NO];</div><div class="line"></div><div class="line">for (UIView *v1 in [webView subviews])</div><div class="line">&#123;</div><div class="line">if ([v1 isKindOfClass:[UIScrollView class]])</div><div class="line">&#123;</div><div class="line">for (UIView *v2 in v1.subviews)</div><div class="line">&#123;</div><div class="line">if ([v2 isKindOfClass:[UIImageView class]])</div><div class="line">&#123;</div><div class="line">v2.hidden = YES;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>57、获取collectionViewCell在屏幕中的frame</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UICollectionViewLayoutAttributes *attributes = [collectionView layoutAttributesForItemAtIndexPath:indexPath];</div><div class="line">CGRect cellRect = attributes.frame;</div><div class="line">CGRect cellFrameInSuperview = [collectionView convertRect:cellRect toView:[cv superview]];</div></pre></td></tr></table></figure>
<p>58、比较两个UIImage是否相等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2</div><div class="line">&#123;</div><div class="line">NSData *data1 = UIImagePNGRepresentation(image1);</div><div class="line">NSData *data2 = UIImagePNGRepresentation(image2);</div><div class="line"></div><div class="line">return [data1 isEqual:data2];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>59、解决当UIScrollView上有UIButton的时候，触摸到button滑动不了的问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 子类化UIScrollView，并重写以下方法</div><div class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</div><div class="line">if (self = [super initWithFrame:frame]) &#123;</div><div class="line">self.delaysContentTouches = NO;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)touchesShouldCancelInContentView:(UIView *)view &#123;</div><div class="line">if ([view isKindOfClass:UIButton.class]) &#123;</div><div class="line">return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return [super touchesShouldCancelInContentView:view];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>60、UITextView中的文字添加阴影效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (void)setTextLayer:(UITextView *)textView color:(UIColor *)color</div><div class="line">&#123;</div><div class="line">CALayer *textLayer = ((CALayer *)[textView.layer.sublayers objectAtIndex:0]);</div><div class="line">textLayer.shadowColor = color.CGColor;</div><div class="line">textLayer.shadowOffset = CGSizeMake(0.0f, 1.0f);</div><div class="line">textLayer.shadowOpacity = 1.0f;</div><div class="line">textLayer.shadowRadius = 1.0f;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>61、MD5加密</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)md5:(NSString *)str</div><div class="line">&#123;</div><div class="line">const char *concat_str = [str UTF8String];</div><div class="line">unsigned char result[CC_MD5_DIGEST_LENGTH];</div><div class="line">CC_MD5(concat_str, (unsigned int)strlen(concat_str), result);</div><div class="line">NSMutableString *hash = [NSMutableString string];</div><div class="line">for (int i =0; i&lt;16; i++)&#123;</div><div class="line">[hash appendFormat:@&quot;X&quot;, result[i]];</div><div class="line">&#125;</div><div class="line">return [hash uppercaseString];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>62、base64加密</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line">@interface NSData (Base64)</div><div class="line">/**</div><div class="line">*  @brief  字符串base64后转data</div><div class="line">*/</div><div class="line">+ (NSData *)dataWithBase64EncodedString:(NSString *)string</div><div class="line">&#123;</div><div class="line">if (![string length]) return nil;</div><div class="line">NSData *decoded = nil;</div><div class="line">#if __MAC_OS_X_VERSION_MIN_REQUIRED &lt; __MAC_10_9 || __IPHONE_OS_VERSION_MIN_REQUIRED &lt; __IPHONE_7_0</div><div class="line">if (![NSData instancesRespondToSelector:@selector(initWithBase64EncodedString:options:)])</div><div class="line">&#123;</div><div class="line">#pragma clang diagnostic push</div><div class="line">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</div><div class="line">decoded = [[self alloc] initWithBase64Encoding:[string stringByReplacingOccurrencesOfString:@&quot;[^A-Za-z0-9+/=]&quot; withString:@&quot;&quot; options:NSRegularExpressionSearch range:NSMakeRange(0, [string length])]];</div><div class="line">#pragma clang diagnostic pop</div><div class="line">&#125;</div><div class="line">else</div><div class="line">#endif</div><div class="line">&#123;</div><div class="line">decoded = [[self alloc] initWithBase64EncodedString:string options:NSDataBase64DecodingIgnoreUnknownCharacters];</div><div class="line">&#125;</div><div class="line">return [decoded length]? decoded: nil;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">*  @brief  NSData转string</div><div class="line">*  @param wrapWidth 换行长度  76  64</div><div class="line">*/</div><div class="line">- (NSString *)base64EncodedStringWithWrapWidth:(NSUInteger)wrapWidth</div><div class="line">&#123;</div><div class="line">if (![self length]) return nil;</div><div class="line">NSString *encoded = nil;</div><div class="line">#if __MAC_OS_X_VERSION_MIN_REQUIRED &lt; __MAC_10_9 || __IPHONE_OS_VERSION_MIN_REQUIRED &lt; __IPHONE_7_0</div><div class="line">if (![NSData instancesRespondToSelector:@selector(base64EncodedStringWithOptions:)])</div><div class="line">&#123;</div><div class="line">#pragma clang diagnostic push</div><div class="line">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</div><div class="line">encoded = [self base64Encoding];</div><div class="line">#pragma clang diagnostic pop</div><div class="line"></div><div class="line">&#125;</div><div class="line">else</div><div class="line">#endif</div><div class="line">&#123;</div><div class="line">switch (wrapWidth)</div><div class="line">&#123;</div><div class="line">case 64:</div><div class="line">&#123;</div><div class="line">return [self base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];</div><div class="line">&#125;</div><div class="line">case 76:</div><div class="line">&#123;</div><div class="line">return [self base64EncodedStringWithOptions:NSDataBase64Encoding76CharacterLineLength];</div><div class="line">&#125;</div><div class="line">default:</div><div class="line">&#123;</div><div class="line">encoded = [self base64EncodedStringWithOptions:(NSDataBase64EncodingOptions)0];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">if (!wrapWidth || wrapWidth &gt;= [encoded length])</div><div class="line">&#123;</div><div class="line">return encoded;</div><div class="line">&#125;</div><div class="line">wrapWidth = (wrapWidth / 4) * 4;</div><div class="line">NSMutableString *result = [NSMutableString string];</div><div class="line">for (NSUInteger i = 0; i &lt; [encoded length]; i+= wrapWidth)</div><div class="line">&#123;</div><div class="line">if (i + wrapWidth &gt;= [encoded length])</div><div class="line">&#123;</div><div class="line">[result appendString:[encoded substringFromIndex:i]];</div><div class="line">break;</div><div class="line">&#125;</div><div class="line">[result appendString:[encoded substringWithRange:NSMakeRange(i, wrapWidth)]];</div><div class="line">[result appendString:@&quot;\r\n&quot;];</div><div class="line">&#125;</div><div class="line">return result;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">*  @brief  NSData转string 换行长度默认64</div><div class="line">*/</div><div class="line">- (NSString *)base64EncodedString</div><div class="line">&#123;</div><div class="line">return [self base64EncodedStringWithWrapWidth:0];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>63、AES加密</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">#import</div><div class="line">@interface NSData (AES)</div><div class="line">/**</div><div class="line">*  利用AES加密数据</div><div class="line">*/</div><div class="line">- (NSData*)encryptedWithAESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</div><div class="line"></div><div class="line">NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line">size_t dataMoved;</div><div class="line">NSMutableData *encryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSizeAES128];</div><div class="line"></div><div class="line">CCCryptorStatus status = CCCrypt(kCCEncrypt,kCCAlgorithmAES128,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,encryptedData.mutableBytes, encryptedData.length,&amp;dataMoved);</div><div class="line"></div><div class="line">if (status == kCCSuccess) &#123;</div><div class="line">encryptedData.length = dataMoved;</div><div class="line">return encryptedData;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return nil;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line">*  @brief  利用AES解密据</div><div class="line">*/</div><div class="line">- (NSData*)decryptedWithAESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</div><div class="line"></div><div class="line">NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line">size_t dataMoved;</div><div class="line">NSMutableData *decryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSizeAES128];</div><div class="line"></div><div class="line">CCCryptorStatus result = CCCrypt(kCCDecrypt,kCCAlgorithmAES128,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,decryptedData.mutableBytes, decryptedData.length,&amp;dataMoved);</div><div class="line"></div><div class="line">if (result == kCCSuccess) &#123;</div><div class="line">decryptedData.length = dataMoved;</div><div class="line">return decryptedData;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return nil;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>64、3DES加密</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">#import</div><div class="line">@interface NSData (3DES)</div><div class="line">/**</div><div class="line">*  利用3DES加密数据</div><div class="line">*/</div><div class="line">- (NSData*)encryptedWith3DESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</div><div class="line"></div><div class="line">NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line">size_t dataMoved;</div><div class="line">NSMutableData *encryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSize3DES];</div><div class="line"></div><div class="line">CCCryptorStatus result = CCCrypt(kCCEncrypt,kCCAlgorithm3DES,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,encryptedData.mutableBytes,encryptedData.length,&amp;dataMoved);</div><div class="line"></div><div class="line">if (result == kCCSuccess) &#123;</div><div class="line">encryptedData.length = dataMoved;</div><div class="line">return encryptedData;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return nil;</div><div class="line"></div><div class="line">&#125;</div><div class="line">/**</div><div class="line">*  @brief   利用3DES解密数据</div><div class="line">*/</div><div class="line">- (NSData*)decryptedWith3DESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</div><div class="line"></div><div class="line">NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line">size_t dataMoved;</div><div class="line">NSMutableData *decryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSize3DES];</div><div class="line"></div><div class="line">CCCryptorStatus result = CCCrypt(kCCDecrypt,kCCAlgorithm3DES,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,decryptedData.mutableBytes,decryptedData.length,&amp;dataMoved);</div><div class="line"></div><div class="line">if (result == kCCSuccess) &#123;</div><div class="line">decryptedData.length = dataMoved;</div><div class="line">return decryptedData;</div><div class="line">&#125;</div><div class="line"></div><div class="line">return nil;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>65、单个页面多个网络请求的情况，需要监听所有网络请求结束后刷新UI</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t group = dispatch_group_create();</div><div class="line">dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.wzb.test.www&quot;, DISPATCH_QUEUE_SERIAL);</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, serialQueue, ^&#123;</div><div class="line">// 网络请求一</div><div class="line">[WebClick getDataSuccess:^(ResponseModel *model) &#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125; failure:^(NSString *err) &#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125;];</div><div class="line">&#125;);</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, serialQueue, ^&#123;</div><div class="line">// 网络请求二</div><div class="line">[WebClick getDataSuccess:getBigTypeRM onSuccess:^(ResponseModel *model) &#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125;                                  failure:^(NSString *errorString) &#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125;];</div><div class="line">&#125;);</div><div class="line">dispatch_group_enter(group);</div><div class="line">dispatch_group_async(group, serialQueue, ^&#123;</div><div class="line">// 网络请求三</div><div class="line">[WebClick getDataSuccess:^&#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125; failure:^(NSString *errorString) &#123;</div><div class="line">dispatch_group_leave(group);</div><div class="line">&#125;];</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 所有网络请求结束后会来到这个方法</div><div class="line">dispatch_group_notify(group, serialQueue, ^&#123;</div><div class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">// 刷新UI</div><div class="line">&#125;);</div><div class="line">&#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>66、解决openUrl延时问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// 方法一</div><div class="line">dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line"></div><div class="line">UIApplication *application = [UIApplication sharedApplication];</div><div class="line">if ([application respondsToSelector:@selector(openURL:options:completionHandler:)]) &#123;</div><div class="line">[application openURL:URL options:@&#123;&#125;</div><div class="line">completionHandler:nil];</div><div class="line">&#125; else &#123;</div><div class="line">[application openURL:URL];</div><div class="line">&#125;</div><div class="line">&#125;);</div><div class="line">// 方法二</div><div class="line">[self performSelector:@selector(redirectToURL:) withObject:url afterDelay:0.1];</div><div class="line"></div><div class="line">- (void) redirectToURL</div><div class="line">&#123;</div><div class="line">UIApplication *application = [UIApplication sharedApplication];</div><div class="line">if ([application respondsToSelector:@selector(openURL:options:completionHandler:)]) &#123;</div><div class="line">[application openURL:URL options:@&#123;&#125;</div><div class="line">completionHandler:nil];</div><div class="line">&#125; else &#123;</div><div class="line">[application openURL:URL];</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>67、页面跳转实现翻转动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// modal方式</div><div class="line">TestViewController *vc = [[TestViewController alloc] init];</div><div class="line">vc.view.backgroundColor = [UIColor redColor];</div><div class="line">vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;</div><div class="line">[self presentViewController:vc animated:YES completion:nil];</div><div class="line"></div><div class="line">// push方式</div><div class="line">TestViewController *vc = [[TestViewController alloc] init];</div><div class="line">vc.view.backgroundColor = [UIColor redColor];</div><div class="line">[UIView beginAnimations:@&quot;View Flip&quot; context:nil];</div><div class="line">[UIView setAnimationDuration:0.80];</div><div class="line">[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];</div><div class="line">[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];</div><div class="line">[self.navigationController pushViewController:vc animated:YES];</div><div class="line">[UIView commitAnimations];</div></pre></td></tr></table></figure>
<p>68、tableView实现无限滚动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</div><div class="line">&#123;</div><div class="line">CGFloat actualPosition = scrollView.contentOffset.y;</div><div class="line">CGFloat contentHeight = scrollView.contentSize.height - scrollView.frame.size.height;</div><div class="line">if (actualPosition &gt;= contentHeight) &#123;</div><div class="line">[self.dataArr addObjectsFromArray:self.dataArr];</div><div class="line">[self.tableView reloadData];</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>69、代码方式调整屏幕亮度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// brightness属性值在0-1之间，0代表最小亮度，1代表最大亮度</div><div class="line">[[UIScreen mainScreen] setBrightness:0.5];</div></pre></td></tr></table></figure>
<p>70、获取当前应用CUP用量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">float cpu_usage()</div><div class="line">&#123;</div><div class="line">kern_return_t kr;</div><div class="line">task_info_data_t tinfo;</div><div class="line">mach_msg_type_number_t task_info_count;</div><div class="line"></div><div class="line">task_info_count = TASK_INFO_MAX;</div><div class="line">kr = task_info(mach_task_self(), TASK_BASIC_INFO, (task_info_t)tinfo, &amp;task_info_count);</div><div class="line">if (kr != KERN_SUCCESS) &#123;</div><div class="line">return -1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">task_basic_info_t      basic_info;</div><div class="line">thread_array_t         thread_list;</div><div class="line">mach_msg_type_number_t thread_count;</div><div class="line"></div><div class="line">thread_info_data_t     thinfo;</div><div class="line">mach_msg_type_number_t thread_info_count;</div><div class="line"></div><div class="line">thread_basic_info_t basic_info_th;</div><div class="line">uint32_t stat_thread = 0; // Mach threads</div><div class="line"></div><div class="line">basic_info = (task_basic_info_t)tinfo;</div><div class="line"></div><div class="line">// get threads in the task</div><div class="line">kr = task_threads(mach_task_self(), &amp;thread_list, &amp;thread_count);</div><div class="line">if (kr != KERN_SUCCESS) &#123;</div><div class="line">return -1;</div><div class="line">&#125;</div><div class="line">if (thread_count &gt; 0)</div><div class="line">stat_thread += thread_count;</div><div class="line"></div><div class="line">long tot_sec = 0;</div><div class="line">long tot_usec = 0;</div><div class="line">float tot_cpu = 0;</div><div class="line">int j;</div><div class="line"></div><div class="line">for (j = 0; j &lt; (int)thread_count; j++)</div><div class="line">&#123;</div><div class="line">thread_info_count = THREAD_INFO_MAX;</div><div class="line">kr = thread_info(thread_list[j], THREAD_BASIC_INFO,</div><div class="line">(thread_info_t)thinfo, &amp;thread_info_count);</div><div class="line">if (kr != KERN_SUCCESS) &#123;</div><div class="line">return -1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">basic_info_th = (thread_basic_info_t)thinfo;</div><div class="line"></div><div class="line">if (!(basic_info_th-&gt;flags &amp; TH_FLAGS_IDLE)) &#123;</div><div class="line">tot_sec = tot_sec + basic_info_th-&gt;user_time.seconds + basic_info_th-&gt;system_time.seconds;</div><div class="line">tot_usec = tot_usec + basic_info_th-&gt;user_time.microseconds + basic_info_th-&gt;system_time.microseconds;</div><div class="line">tot_cpu = tot_cpu + basic_info_th-&gt;cpu_usage / (float)TH_USAGE_SCALE * 100.0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125; // for each thread</div><div class="line"></div><div class="line">kr = vm_deallocate(mach_task_self(), (vm_offset_t)thread_list, thread_count * sizeof(thread_t));</div><div class="line">assert(kr == KERN_SUCCESS);</div><div class="line"></div><div class="line">return tot_cpu;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>71、float数据取整四舍五入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CGFloat f = 4.65;</div><div class="line">NSLog(@&quot;%d&quot;, (int)f);    // 打印结果4</div><div class="line"></div><div class="line">CGFloat f = 4.65;</div><div class="line">NSLog(@&quot;%d&quot;, (int)round(f));    // 打印结果5</div></pre></td></tr></table></figure>
<p>72、删除UISearchBar系统默认边框</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 方法一</div><div class="line">searchBar.searchBarStyle = UISearchBarStyleMinimal;</div><div class="line"></div><div class="line">// 方法二</div><div class="line">[searchBar setBackgroundImage:[[UIImage alloc]init]];</div><div class="line"></div><div class="line">// 方法三</div><div class="line">searchBar.barTintColor = [UIColor whiteColor];</div></pre></td></tr></table></figure>
<p>73、为UICollectionViewCell设置圆角和阴影</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">cell.contentView.layer.cornerRadius = 2.0f;</div><div class="line">cell.contentView.layer.borderWidth = 1.0f;</div><div class="line">cell.contentView.layer.borderColor = [UIColor clearColor].CGColor;</div><div class="line">cell.contentView.layer.masksToBounds = YES;</div><div class="line"></div><div class="line">cell.layer.shadowColor = [UIColor lightGrayColor].CGColor;</div><div class="line">cell.layer.shadowOffset = CGSizeMake(0, 2.0f);</div><div class="line">cell.layer.shadowRadius = 2.0f;</div><div class="line">cell.layer.shadowOpacity = 1.0f;</div><div class="line">cell.layer.masksToBounds = NO;</div><div class="line">cell.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:cell.bounds cornerRadius:cell.contentView.layer.cornerRadius].CGPath;</div></pre></td></tr></table></figure>
<p>74、让正在滑动的scrollView停止滚动(不是禁止，而是暂时停止滚动)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[scrollView setContentOffset:scrollView.contentOffset animated:NO];</div></pre></td></tr></table></figure>
<p>75、使用xib设置UIView的边框、圆角<br>圆角和边框看下图即可设置<br><img src="http://ofutv2nt8.bkt.clouddn.com/xib%E8%AE%BE%E7%BD%AE%E5%9C%86%E8%A7%92%E8%BE%B9%E6%A1%86.png" alt="xib设置圆角边框.png"></p>
<p>但是增加layer.borderColor的keyPath设置边框颜色并不能起作用，后来查了资料，这里应该用layer.borderUIColor，但是这里设置的颜色不起作用，无论设置什么颜色显示出来的都是黑色的。后来又去查了下，有种解决方案是给CALayer添加一个分类，提供一个 - (void)setBorderUIColor:(UIColor *)color;方法就可以解决了，实现如下：</p>
<p><img src="http://ofutv2nt8.bkt.clouddn.com/xib%E8%AE%BE%E7%BD%AE%E8%BE%B9%E6%A1%86%E9%A2%9C%E8%89%B2.png" alt="xib设置边框颜色.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#import &quot;CALayer+BorderColor.h&quot;</div><div class="line"></div><div class="line">@implementation CALayer (BorderColor)</div><div class="line"></div><div class="line">- (void)setBorderUIColor:(UIColor *)color</div><div class="line">&#123;</div><div class="line">self.borderColor = color.CGColor;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>76、根据经纬度获取城市等信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">// 创建经纬度</div><div class="line">    CLLocation *location = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude];</div><div class="line">    //创建一个译码器</div><div class="line">    CLGeocoder *cLGeocoder = [[CLGeocoder alloc] init];</div><div class="line">    [cLGeocoder reverseGeocodeLocation:userLocation completionHandler:^(NSArray *placemarks, NSError *error) &#123;</div><div class="line">        CLPlacemark *place = [placemarks objectAtIndex:0];</div><div class="line">        // 位置名</div><div class="line">    　　NSLog(@&quot;name,%@&quot;,place.name);</div><div class="line">    　　// 街道</div><div class="line">    　　NSLog(@&quot;thoroughfare,%@&quot;,place.thoroughfare);</div><div class="line">    　　// 子街道</div><div class="line">    　　NSLog(@&quot;subThoroughfare,%@&quot;,place.subThoroughfare);</div><div class="line">    　　// 市</div><div class="line">    　　NSLog(@&quot;locality,%@&quot;,place.locality);</div><div class="line">    　　// 区</div><div class="line">    　　NSLog(@&quot;subLocality,%@&quot;,place.subLocality); </div><div class="line">    　　// 国家</div><div class="line">    　　NSLog(@&quot;country,%@&quot;,place.country);</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">/*  CLPlacemark中属性含义</div><div class="line">name                    地名</div><div class="line"></div><div class="line">thoroughfare            街道</div><div class="line"></div><div class="line">subThoroughfare        街道相关信息，例如门牌等</div><div class="line">locality                城市</div><div class="line"></div><div class="line">subLocality            城市相关信息，例如标志性建筑</div><div class="line"></div><div class="line">administrativeArea      直辖市</div><div class="line"></div><div class="line">subAdministrativeArea  其他行政区域信息（自治区等）</div><div class="line"></div><div class="line">postalCode              邮编</div><div class="line"></div><div class="line">ISOcountryCode          国家编码</div><div class="line"></div><div class="line">country                国家</div><div class="line"></div><div class="line">inlandWater            水源，湖泊</div><div class="line"></div><div class="line">ocean                  海洋</div><div class="line"></div><div class="line">areasOfInterest        关联的或利益相关的地标</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>77、如何防止添加多个NSNotification观察者？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 解决方案就是添加观察者之前先移除下这个观察者</div><div class="line">[[NSNotificationCenter defaultCenter] removeObserver:observer name:name object:object];</div><div class="line">        [[NSNotificationCenter defaultCenter] addObserver:observer selector:selector name:name object:object];</div></pre></td></tr></table></figure>
<p>78、将一个xib添加到另外一个xib上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 假设你的自定义view名字为CustomView，你需要在CustomView.m中重写 `- (instancetype)initWithCoder:(NSCoder *)aDecoder` 方法，代码如下：</div><div class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;</div><div class="line">    if ((self = [super initWithCoder:aDecoder])) &#123;</div><div class="line">        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@&quot;CustomView&quot; owner:self options:nil] objectAtIndex:0]];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将一个xib添加到另外一个xib上.png<br>79、处理字符串，使其首字母大写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">    NSString *str = @&quot;abcdefghijklmn&quot;;</div><div class="line">    NSString *resultStr;</div><div class="line">    if (str &amp;&amp; str.length &gt; 0) &#123;</div><div class="line">        resultStr = [str stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:[[str substringToIndex:1] capitalizedString]];</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;%@&quot;, resultStr);</div><div class="line">80、判断一个UIAlertView/UIAlertController是否显示</div><div class="line">// UIAlertView自带属性</div><div class="line">if (alert.visible)</div><div class="line">&#123;</div><div class="line">      NSLog(@&quot;显示了&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">      NSLog(@&quot;未显示&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// UIAlertController没有visible属性，需要自己判断，添加一个全局变量 BOOL visible</div><div class="line">UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@&quot;Title&quot; message:@&quot;message&quot; preferredStyle:UIAlertControllerStyleAlert];</div><div class="line">    UIAlertAction *alertAction = [UIAlertAction actionWithTitle:@&quot;ActionTitle&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;</div><div class="line">        self.visible = NO;</div><div class="line">    &#125;];</div><div class="line">    UIAlertAction *calcelAction = [UIAlertAction actionWithTitle:@&quot;calcelTitle&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123;</div><div class="line">        self.visible = NO;</div><div class="line">    &#125;];</div><div class="line">    [alertController addAction:alertAction];</div><div class="line">    [alertController addAction:calcelAction];</div><div class="line">    [self presentViewController:alertController animated:YES completion:^&#123;</div><div class="line">        self.visible = YES;</div><div class="line">    &#125;];</div></pre></td></tr></table></figure>
<p>81、获取字符串中的数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (NSString *)getNumberFromStr:(NSString *)str</div><div class="line">&#123;</div><div class="line">    NSCharacterSet *nonDigitCharacterSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];</div><div class="line">    return [[str componentsSeparatedByCharactersInSet:nonDigitCharacterSet] componentsJoinedByString:@&quot;&quot;];</div><div class="line">&#125;</div><div class="line">6</div><div class="line">    NSLog(@&quot;%@&quot;, [self getNumberFromStr:@&quot;a0b0c1d2e3f4fda8fa8fad9fsad23&quot;]); // 00123488923</div></pre></td></tr></table></figure>
<p>82、为UIView的某个方向添加边框</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">// 添加UIView分类</div><div class="line"></div><div class="line">// UIView+WZB.h</div><div class="line">#import</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> 边框方向</div><div class="line"></div><div class="line"> - WZBBorderDirectionTop: 顶部</div><div class="line"> - WZBBorderDirectionLeft: 左边</div><div class="line"> - WZBBorderDirectionBottom: 底部</div><div class="line"> - WZBBorderDirectionRight: 右边</div><div class="line"> */</div><div class="line">typedef NS_ENUM(NSInteger, WZBBorderDirectionType) &#123;</div><div class="line">    WZBBorderDirectionTop = 0,</div><div class="line">    WZBBorderDirectionLeft,</div><div class="line">    WZBBorderDirectionBottom,</div><div class="line">    WZBBorderDirectionRight</div><div class="line">&#125;;</div><div class="line"></div><div class="line">@interface UIView (WZB)</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> 为UIView的某个方向添加边框</div><div class="line"></div><div class="line"> @param direction 边框方向</div><div class="line"> @param color 边框颜色</div><div class="line"> @param width 边框宽度</div><div class="line"> */</div><div class="line">- (void)wzb_addBorder:(WZBBorderDirectionType)direction color:(UIColor *)color width:(CGFloat)width;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">// UIView+WZB.m</div><div class="line">#import &quot;UIView+WZB.h&quot;</div><div class="line"></div><div class="line">@implementation UIView (WZB)</div><div class="line"></div><div class="line">- (void)wzb_addBorder:(WZBBorderDirectionType)direction color:(UIColor *)color width:(CGFloat)width</div><div class="line">&#123;</div><div class="line">    CALayer *border = [CALayer layer];</div><div class="line">    border.backgroundColor = color.CGColor;</div><div class="line">    switch (direction) &#123;</div><div class="line">        case WZBBorderDirectionTop:</div><div class="line">        &#123;</div><div class="line">            border.frame = CGRectMake(0.0f, 0.0f, self.bounds.size.width, width);</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line">        case WZBBorderDirectionLeft:</div><div class="line">        &#123;</div><div class="line">            border.frame = CGRectMake(0.0f, 0.0f, width, self.bounds.size.height);</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line">        case WZBBorderDirectionBottom:</div><div class="line">        &#123;</div><div class="line">            border.frame = CGRectMake(0.0f, self.bounds.size.height - width, self.bounds.size.width, width);</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line">        case WZBBorderDirectionRight:</div><div class="line">        &#123;</div><div class="line">            border.frame = CGRectMake(self.bounds.size.width - width, 0, width, self.bounds.size.height);</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">    [self.layer addSublayer:border];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>83、通过属性设置UISwitch、UIProgressView等控件的宽高</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mySwitch.transform = CGAffineTransformMakeScale(5.0f, 5.0f);</div><div class="line"></div><div class="line">progressView.transform = CGAffineTransformMakeScale(5.0f, 5.0f);</div></pre></td></tr></table></figure>
<p>84、自动搜索功能，用户连续输入的时候不搜索，用户停止输入的时候自动搜索(我这里设置的是0.5s，可根据需求更改)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 输入框文字改变的时候调用</div><div class="line">-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText&#123;</div><div class="line">    // 先取消调用搜索方法</div><div class="line">    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(searchNewResult) object:nil];</div><div class="line">    // 0.5秒后调用搜索方法</div><div class="line">    [self performSelector:@selector(searchNewResult) withObject:nil afterDelay:0.5];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>85、修改UISearchBar的占位文字颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 方法一（推荐使用）</div><div class="line">UITextField *searchField = [searchBar valueForKey:@&quot;_searchField&quot;];</div><div class="line">[searchField setValue:[UIColor blueColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</div><div class="line"></div><div class="line">// 方法二（已过期）</div><div class="line">[[UILabel appearanceWhenContainedIn:[UISearchBar class], nil] setTextColor:[UIColor redColor]];</div><div class="line"></div><div class="line">// 方法三（已过期）</div><div class="line">NSDictionary *placeholderAttributes = @&#123;NSForegroundColorAttributeName : [UIColor redColor], NSFontAttributeName : [UIFont fontWithName:@&quot;HelveticaNeue&quot; size:15],&#125;;</div><div class="line">NSAttributedString *attributedPlaceholder = [[NSAttributedString alloc] initWithString:searchBar.placeholder attributes:placeholderAttributes];</div><div class="line">[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setAttributedPlaceholder:attributedPlaceholder];</div></pre></td></tr></table></figure>
<p>86、某个界面多个事件同时响应引起的问题(比如，两个button同时按push到新界面，两个都会响应，可能导致push重叠)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// UIView有个属性叫做exclusiveTouch，设置为YES后，其响应事件会和其他view互斥(有其他view事件响应的时候点击它不起作用)</div><div class="line">view.exclusiveTouch = YES;</div><div class="line"></div><div class="line">// 一个一个设置太麻烦了，可以全局设置</div><div class="line">[[UIView appearance] setExclusiveTouch:YES];</div><div class="line"></div><div class="line">// 或者只设置button</div><div class="line">[[UIButton appearance] setExclusiveTouch:YES];</div></pre></td></tr></table></figure>
<p>87、修改tabBar的frame</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 子类化UITabBarViewController，我这里以修改tabBar高度为例，重写viewWillLayoutSubviews方法</div><div class="line">#import &quot;WZBTabBarViewController.h&quot;</div><div class="line"></div><div class="line">@interface WZBTabBarViewController ()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation WZBTabBarViewController</div><div class="line">- (void)viewWillLayoutSubviews &#123;</div><div class="line"></div><div class="line">    CGRect tabFrame = self.tabBar.frame;</div><div class="line">    tabFrame.size.height = 100;</div><div class="line">    tabFrame.origin.y = self.view.frame.size.height - 100;</div><div class="line">    self.tabBar.frame = tabFrame;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>88、修改键盘背景颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 设置某个键盘颜色</div><div class="line">    textField.keyboardAppearance = UIKeyboardAppearanceAlert;</div><div class="line"></div><div class="line">// 设置工程中所有键盘颜色</div><div class="line">[[UITextField appearance] setKeyboardAppearance:UIKeyboardAppearanceAlert];</div><div class="line">89、修改image颜色</div><div class="line">UIImage *image = [UIImage imageNamed:@&quot;test&quot;];</div><div class="line">    imageView.image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];</div><div class="line">    CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextClipToMask(context, rect, image.CGImage);</div><div class="line">    CGContextSetFillColorWithColor(context, [[UIColor redColor] CGColor]);</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line">    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    UIImage *flippedImage = [UIImage imageWithCGImage:img.CGImage scale:1.0 orientation: UIImageOrientationDownMirrored];</div><div class="line">    imageView.image = flippedImage;</div></pre></td></tr></table></figure>
<p>90、动画执行removeFromSuperview</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[UIView animateWithDuration:0.2</div><div class="line">                 animations:^&#123;</div><div class="line">                     view.alpha = 0.0f;</div><div class="line">                 &#125; completion:^(BOOL finished)&#123;</div><div class="line">                     [view removeFromSuperview];</div><div class="line">                 &#125;];</div></pre></td></tr></table></figure>
<p>91、设置UIButton高亮背景颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[UIView animateWithDuration:0.2</div><div class="line">                 animations:^&#123;</div><div class="line">                     view.alpha = 0.0f;</div><div class="line">                 &#125; completion:^(BOOL finished)&#123;</div><div class="line">                     [view removeFromSuperview];</div><div class="line">                 &#125;];</div></pre></td></tr></table></figure>
<p>92、设置UIButton高亮时的背景颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">// 方法一、子类化UIButton，重写setHighlighted:方法，代码如下</div><div class="line">#import &quot;WZBButton.h&quot;</div><div class="line"></div><div class="line">@implementation WZBButton</div><div class="line"></div><div class="line">- (void)setHighlighted:(BOOL)highlighted &#123;</div><div class="line">    [super setHighlighted:highlighted];</div><div class="line"></div><div class="line">    UIColor *normalColor = [UIColor greenColor];</div><div class="line">    UIColor *highlightedColor = [UIColor redColor];</div><div class="line">    self.backgroundColor = highlighted ? highlightedColor : normalColor;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">// 方法二、利用setBackgroundImage:forState:方法</div><div class="line">[button setBackgroundImage:[self imageWithColor:[UIColor blueColor]] forState:UIControlStateHighlighted];</div><div class="line"></div><div class="line">- (UIImage *)imageWithColor:(UIColor *)color &#123;</div><div class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line"></div><div class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line"></div><div class="line">    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>93、关于图片拉伸<br>推荐看这个博客，讲的很详细：<a href="http://blog.csdn.net/q199109106q/article/details/8615661" target="_blank" rel="external">http://blog.csdn.net/q199109106q/article/details/8615661</a></p>
<p>94、利用runtime获取一个类所有属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- (NSArray *)allPropertyNames:(Class)aClass</div><div class="line">&#123;</div><div class="line">    unsigned count;</div><div class="line">    objc_property_t *properties = class_copyPropertyList(aClass, &amp;count);</div><div class="line"></div><div class="line">    NSMutableArray *rv = [NSMutableArray array];</div><div class="line"></div><div class="line">    unsigned i;</div><div class="line">    for (i = 0; i &lt; count; i++)</div><div class="line">    &#123;</div><div class="line">        objc_property_t property = properties[i];</div><div class="line">        NSString *name = [NSString stringWithUTF8String:property_getName(property)];</div><div class="line">        [rv addObject:name];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    free(properties);</div><div class="line"></div><div class="line">    return rv;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>95、设置textView的某段文字变成其他颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)setupTextView:(UITextView *)textView text:(NSString *)text color:(UIColor *)color &#123;</div><div class="line">    NSMutableAttributedString *string = [[NSMutableAttributedString alloc]initWithString:textView.text];</div><div class="line">    [string addAttribute:NSForegroundColorAttributeName value:color range:[textView.text rangeOfString:text]];</div><div class="line">    [textView setAttributedText:string];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>96、让push跳转动画像modal跳转动画那样效果(从下往上推上来)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)push</div><div class="line">&#123;</div><div class="line">TestViewController *vc = [[TestViewController alloc] init];</div><div class="line">    vc.view.backgroundColor = [UIColor redColor];</div><div class="line">    CATransition* transition = [CATransition animation];</div><div class="line">    transition.duration = 0.4f;</div><div class="line">    transition.type = kCATransitionMoveIn;</div><div class="line">    transition.subtype = kCATransitionFromTop;</div><div class="line">    [self.navigationController.view.layer addAnimation:transition forKey:kCATransition];</div><div class="line">    [self.navigationController pushViewController:vc animated:NO];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)pop</div><div class="line">&#123;</div><div class="line">CATransition* transition = [CATransition animation];</div><div class="line">    transition.duration = 0.4f;</div><div class="line">    transition.type = kCATransitionReveal;</div><div class="line">    transition.subtype = kCATransitionFromBottom;</div><div class="line">    [self.navigationController.view.layer addAnimation:transition forKey:kCATransition];</div><div class="line">    [self.navigationController popViewControllerAnimated:NO];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>97、上传图片太大，压缩图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">-(UIImage *)resizeImage:(UIImage *)image</div><div class="line">&#123;</div><div class="line">    float actualHeight = image.size.height;</div><div class="line">    float actualWidth = image.size.width;</div><div class="line">    float maxHeight = 300.0;</div><div class="line">    float maxWidth = 400.0;</div><div class="line">    float imgRatio = actualWidth/actualHeight;</div><div class="line">    float maxRatio = maxWidth/maxHeight;</div><div class="line">    float compressionQuality = 0.5;//50 percent compression</div><div class="line"></div><div class="line">    if (actualHeight &gt; maxHeight || actualWidth &gt; maxWidth)</div><div class="line">    &#123;</div><div class="line">        if(imgRatio &lt; maxRatio)</div><div class="line">        &#123;</div><div class="line">            //adjust width according to maxHeight</div><div class="line">            imgRatio = maxHeight / actualHeight;</div><div class="line">            actualWidth = imgRatio * actualWidth;</div><div class="line">            actualHeight = maxHeight;</div><div class="line">        &#125;</div><div class="line">        else if(imgRatio &gt; maxRatio)</div><div class="line">        &#123;</div><div class="line">            //adjust height according to maxWidth</div><div class="line">            imgRatio = maxWidth / actualWidth;</div><div class="line">            actualHeight = imgRatio * actualHeight;</div><div class="line">            actualWidth = maxWidth;</div><div class="line">        &#125;</div><div class="line">        else</div><div class="line">        &#123;</div><div class="line">            actualHeight = maxHeight;</div><div class="line">            actualWidth = maxWidth;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    CGRect rect = CGRectMake(0.0, 0.0, actualWidth, actualHeight);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    [image drawInRect:rect];</div><div class="line">    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    NSData *imageData = UIImageJPEGRepresentation(img, compressionQuality);</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return [UIImage imageWithData:imageData];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/01/iOS改变字体大小功能的实现/" rel="next" title="iOS改变字体大小功能的实现">
                <i class="fa fa-chevron-left"></i> iOS改变字体大小功能的实现
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/10/17/2017-10-17/" rel="prev" title="CocoaPods安装指南">
                CocoaPods安装指南 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://ofutv2nt8.bkt.clouddn.com/blog/image/xiamu.jpeg"
               alt="安国立" />
          <p class="site-author-name" itemprop="name">安国立</p>
          <p class="site-description motion-element" itemprop="description">留给中国队的时间不多了</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/AnGuoli" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://juejin.im/user/5a1678e7f265da432c23856e" target="_blank" title="掘金">
                  
                    <i class="fa fa-fw fa-joomla"></i>
                  
                  掘金
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/98bd5a3ecd08" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-jsfiddle"></i>
                  
                  简书
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安国立</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
